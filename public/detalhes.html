<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="assets/css/detalhes.css">
</head>
    <body>

        <header class="cabecalho">
            <h1>Tela de Detalhes</h1>
        </header>

        <div id="exibedetail"></div>

        <h2 id="title-film">Fotos Relacionadas:</h2>
        <!-- Lightbox de Imagens Vinculadas -->
        <div id="lightbox-gallery">
        
        </div>



         <!--Rodapé-->

            <footer class="rodape">

                <h2>Fale com a gente!!!</h2>

                <ul>
                    <li><a href="tel:+5531999999999"><i class="fas fa-phone"></i> Ligue para: (31)9999-999</a></li>
                    <li><a href="https://www.instagram.com/" target="_blank"><i class="fab fa-instagram"></i> Instagram</a></li>
                    <li><a href="https://www.facebook.com/" target="_blank"><i class="fab fa-facebook-f"></i> Facebook</a></li>
                    <li><a href="https://www.youtube.com/" target="_blank"><i class="fab fa-youtube"></i> Youtube</a></li>        
                </ul>

                <h3>Desenvolvido por Lucas Vieira Carvalho</h3>
            </footer>

        <script src="assets/scripts/app.js"></script>
        <script>
            let params = new URLSearchParams(location.search);
            let id = Number(params.get('id'));

            
            let filmeEncontrado = filmes.find(function(elem){ 
                return elem.id === id;
            });

            let exibir = document.getElementById('exibedetail');
            let lightboxGallery = document.getElementById('lightbox-gallery');

            if(filmeEncontrado) {
                // Exibindo as informações gerais
                exibir.innerHTML = `
                    <h2>${filmeEncontrado.titulo}</h2>
                    <img src="${filmeEncontrado.imagem}" alt="${filmeEncontrado.titulo}" class="img-fluid">
                    <p>${filmeEncontrado.descricao}</p>
                    <span>Autor: ${filmeEncontrado.autor} | Data: ${filmeEncontrado.data}</span>
                `;

                // Criando os links do lightbox para as fotos
                if(filmeEncontrado.id) {
                
                    let fotosRelacionadas = fotos.find(item => item.itemId === id);
                    if (fotosRelacionadas && fotosRelacionadas.fotos.length > 0) {
                        fotosRelacionadas.fotos.forEach(foto => {
                            let fotoElement = document.createElement('a');
                            fotoElement.href = foto.src;
                            fotoElement.classList.add('lightbox-thumbnail');
                            fotoElement.setAttribute('data-bs-toggle', 'modal');
                            fotoElement.setAttribute('data-bs-target', '#exampleModal');

                            fotoElement.innerHTML = `
                                <img src="${foto.src}" alt="${foto.titulo}" class="img-thumbnail">
                            `;

                            lightboxGallery.appendChild(fotoElement);
                        });
                    } else {
                        lightboxGallery.innerHTML = 'Nenhuma foto disponível';
                    }
                }

            } else {
                exibir.innerHTML = 'Filme não encontrado';
            }
        </script>
  
    </body>